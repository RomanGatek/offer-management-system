<!DOCTYPE html>
<html lang="cs" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Nab√≠dka</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .box { border: 1px solid #ddd; padding: 16px; border-radius: 6px; max-width: 700px; }
        .actions form { margin-top: 10px; }
        .muted { color: #777; font-size: 13px; }
    </style>
</head>
<body>

<div class="box">

    <h2>Nab√≠dka pro z√°kazn√≠ka</h2>

    <p>
        <strong>Z√°kazn√≠k:</strong> <span th:text="${offer.customerName}"></span><br>
        <strong>Popis:</strong> <span th:text="${offer.description}"></span><br>
        <strong>Cena:</strong> <strong th:text="${offer.totalPrice} + ' Kƒç'"></strong><br>
        <strong>Stav:</strong> <span th:text="${offer.status}"></span><br>
        <strong>Platnost do:</strong>
        <span th:text="${#temporals.format(offer.tokenExpiresAt,'dd.MM.yyyy')}"></span>
    </p>

    <hr>

    <!-- üîë TOKEN ‚Äì pouze pro testov√°n√≠ -->
    <p class="muted">
        Token: <code th:text="${offer.customerToken}"></code>
    </p>

    <!-- üìú AUDIT -->
    <p>
        <a th:href="@{/public/offers/{token}/audit(token=${offer.customerToken})}">
            üìú Zobrazit pr≈Øbƒõh nab√≠dky
        </a>
    </p>

    <hr>

    <div th:if="${offer.status.name() == 'ODESLANA'}" class="actions">

        <form th:action="@{/public/offers/{token}/accept(token=${offer.customerToken})}"
              method="post">
            <button type="submit">‚úÖ P≈ôijmout nab√≠dku</button>
        </form>

        <form th:action="@{/public/offers/{token}/reject(token=${offer.customerToken})}"
              method="post">
        <textarea name="note" rows="3" cols="50"
                  placeholder="D≈Øvod (voliteln√©)"></textarea><br>
            <button type="submit">‚ùå Zam√≠tnout nab√≠dku</button>
        </form>

    </div>

    <div th:if="${offer.status.name() == 'PRIJATA'}">
        <p style="color:green;font-weight:bold;">‚úî Nab√≠dka byla p≈ôijata</p>
    </div>

    <div th:if="${offer.status.name() == 'ZAMITNUTA'}">
        <p style="color:red;font-weight:bold;">‚úñ Nab√≠dka byla zam√≠tnuta</p>
    </div>

    <hr>

    <p class="muted">
        Tento odkaz je unik√°tn√≠ a plat√≠ maxim√°lnƒõ 30 dn√≠.
    </p>

</div>

</body>
</html>